# PostgreSQL connection string
# Local development (via docker-compose):
POSTGRES_URL=postgresql://tapandtell:tapandtell_dev@localhost:5432/tapandtell

# Or use DATABASE_URL (alternative):
# DATABASE_URL=postgresql://tapandtell:tapandtell_dev@localhost:5432/tapandtell

# JWT signing secret for owner authentication (change in production!)
JWT_SECRET=your-jwt-secret-here

# CSRF token signing secret (change in production!)
CSRF_SECRET=your-csrf-secret-here

# Master encryption key for per-tenant photo encryption (32 bytes, hex-encoded)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# REQUIRED in production. Dev uses an insecure fallback.
ENCRYPTION_MASTER_KEY=

# Data directory for storing encrypted photos
DATA_DIR=.data

# --- Email (Resend) ---
# API key for sending transactional emails via Resend
# Without this, emails are logged to the console in development.
RESEND_API_KEY=
# From address for transactional emails
RESEND_FROM=Tap & Tell <noreply@tap-and-tell.app>

# --- Storage ---
# Storage driver: 'local' (default), 'vercel-blob', or 's3'
STORAGE_DRIVER=local

# Vercel Blob Storage (only when STORAGE_DRIVER=vercel-blob)
# Token is automatically provided when deployed to Vercel.
# For local development with Vercel Blob, get the token from your Vercel dashboard:
# Project → Storage → [Your Blob Store] → Tokens
# BLOB_READ_WRITE_TOKEN=vercel_blob_rw_xxxxxxxxxxxx

# S3-compatible storage (only when STORAGE_DRIVER=s3)
# S3_BUCKET=
# S3_REGION=
# S3_ENDPOINT=
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=

# --- Beta Access Control ---
# Controls registration access during beta phases:
# - 'private': Only users with valid beta invite tokens can register
# - 'waitlist': Waitlist is open, registration still requires invite
# - 'open': Public registration enabled (post-launch)
BETA_MODE=private

# Comma-separated list of email addresses with admin privileges.
# These users can manage beta invites and waitlist via /api/admin/* endpoints.
ADMIN_EMAILS=

# --- Production Admin Bootstrap ---
# Creates an admin user on first startup in production.
# Remove after initial setup for security.
# ADMIN_SEED_EMAIL=admin@example.com
# ADMIN_SEED_PASSWORD=your-secure-password
# ADMIN_SEED_NAME=Admin

# --- Image Size Limits ---
# All sizes support units: B, KB, MB, GB (e.g., "5MB", "500KB", "1024")
# Or plain numbers in bytes (e.g., "5242880" for 5MB)

# Maximum size for guestbook entry photos (Base64-encoded, so ~33% larger than file)
# Default: 7MB (allows ~5MB actual file after Base64 encoding)
# IMAGE_MAX_PHOTO_SIZE=7MB

# Maximum size for user avatar images
# Default: 5MB
# IMAGE_MAX_AVATAR_SIZE=5MB

# Maximum size for guestbook background/header images
# Default: 5MB
# IMAGE_MAX_BACKGROUND_SIZE=5MB

# --- Client-side Image Compression ---
# These settings control how images are compressed before upload

# Maximum pixel dimension (width or height) after compression
# Default: 1920
# IMAGE_MAX_DIMENSION=1920

# JPEG compression quality (0.0 to 1.0)
# Default: 0.8
# IMAGE_JPEG_QUALITY=0.8

# Target file size after compression (in bytes)
# Default: 512000 (500KB)
# IMAGE_TARGET_SIZE=512000

# Maximum file size before compression (larger files are rejected)
# Default: 10485760 (10MB)
# IMAGE_MAX_UPLOAD_SIZE=10485760
